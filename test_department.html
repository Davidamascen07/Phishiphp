<!DOCTYPE html>
<html>
<head>
    <title>Teste de Departamentos</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Teste de Criação de Departamentos</h1>
    
    <div>
        <input type="text" id="deptName" placeholder="Nome do Departamento" value="TI">
        <input type="text" id="deptDescription" placeholder="Descrição" value="Departamento de Tecnologia">
        <input type="color" id="deptColor" value="#007bff">
        <button onclick="testCreateDepartment()">Criar Departamento</button>
    </div>
    
    <div id="result"></div>
    
    <script>
    function testCreateDepartment() {
        const name = $('#deptName').val().trim();
        const description = $('#deptDescription').val().trim();
        const color = $('#deptColor').val();
        
        if (!name) {
            alert('Nome do departamento é obrigatório');
            return;
        }
        
        console.log('Enviando:', {
            action_type: "create_department",
            department_name: name,
            description: description,
            color: color
        });
        
        $.ajax({
            url: 'spear/manager/user_management_manager.php',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
                action_type: "create_department",
                department_name: name,
                description: description,
                color: color
            }),
            success: function(response) {
                console.log('Resposta:', response);
                $('#result').html('<div style="color: green;">Sucesso: ' + JSON.stringify(response) + '</div>');
            },
            error: function(xhr, status, error) {
                console.error('Erro AJAX:', {xhr: xhr, status: status, error: error});
                console.log('ResponseText:', xhr.responseText);
                $('#result').html('<div style="color: red;">Erro: ' + xhr.responseText + '</div>');
            }
        });
    }
    </script>
</body>
</html>